# CryptoCore - Отчет о статусе проекта

**Спринт:** 1  
**Статус:** ✅ Завершен  
**Дата:** Октябрь 2025

## Цель Спринта 1
Создать кодовую базу и реализовать основные операции блочного шифрования в режиме ECB.

---

## Контрольный список соответствия требованиям

### 1. Структура проекта и гигиена репозитория

| ID | Требование | Статус | Примечания |
|----|------------|--------|------------|
| STR-1 | Git-репозиторий | ✅ Выполнено | Репозиторий инициализирован с помощью `git init` |
| STR-2 | README.md с требуемым содержимым | ✅ Выполнено | Полный README со всеми требуемыми разделами |
| STR-3 | Система сборки | ✅ Выполнено | Makefile для Linux/macOS, build.bat для Windows |
| STR-4 | Логическая организация исходников | ✅ Выполнено | Организовано в директории src/, include/, tests/ |

**Структура проекта:**
```
cryptocore/
├── src/
│   ├── ecb.c              # Реализация режима ECB
│   └── file_io.c          # Операции ввода-вывода файлов
├── include/
│   ├── ecb.h              # Объявления ECB
│   └── file_io.h          # Объявления ввода-вывода файлов
├── tests/
│   ├── run_tests.sh       # Автоматизированный тестовый скрипт (Bash)
│   └── test_manual.ps1    # Ручной тестовый скрипт (PowerShell)
├── main.c                 # Парсер CLI и основная логика
├── Makefile               # Система сборки Unix
├── build.bat              # Скрипт сборки для Windows
├── README.md              # Основная документация
├── QUICKSTART.md          # Краткое руководство
├── WINDOWS_BUILD.md       # Инструкции для сборки на Windows
├── EXAMPLES.md            # Примеры использования
├── .gitignore             # Правила игнорирования Git
└── PROJECT_STATUS.md      # Этот файл
```

### 2. Парсер интерфейса командной строки (CLI)

| ID | Требование | Статус | Реализация |
|----|------------|--------|------------|
| CLI-1 | Вызывается как `cryptocore` | ✅ Выполнено | Бинарный/исполняемый файл с именем `cryptocore` (или `cryptocore.exe` в Windows) |
| CLI-2 | Обязательные аргументы | ✅ Выполнено | Все аргументы реализованы и проверяются |
| CLI-3 | Формат hex-ключа | ✅ Выполнено | Принимает 32-символьную hex-строку, проверяет формат |
| CLI-4 | Проверка аргументов | ✅ Выполнено | Всесторонняя проверка с четкими сообщениями об ошибках |
| CLI-5 | Имя выходного файла по умолчанию | ✅ Выполнено | Генерирует суффикс `.enc` или `.dec`, если не указано |

**Поддерживаемые аргументы:**
- `--algorithm aes` ✅
- `--mode ecb` ✅
- `--encrypt` / `--decrypt` ✅
- `--key <32-hex-символа>` ✅
- `--input <файл>` ✅
- `--output <файл>` (опционально) ✅

**Примеры команд:**
```bash
# Шифрование
cryptocore --algorithm aes --mode ecb --encrypt \
  --key 000102030405060708090a0b0c0d0e0f \
  --input plaintext.txt --output ciphertext.bin

# Дешифрование
cryptocore --algorithm aes --mode ecb --decrypt \
  --key 000102030405060708090a0b0c0d0e0f \
  --input ciphertext.bin --output decrypted.txt
```

### 3. Основная криптографическая реализация

| ID | Требование | Статус | Реализация |
|----|------------|--------|------------|
| CRY-1 | Реализация AES-128 | ✅ Выполнено | 128-битный блочный шифр со 128-битным ключом |
| CRY-2 | Использование внешней библиотеки AES | ✅ Выполнено | Функции OpenSSL `AES_encrypt` и `AES_decrypt` |
| CRY-3 | Студенческая реализация режима ECB | ✅ Выполнено | Логика разделения на блоки и обработки в `src/ecb.c` |
| CRY-4 | Дополнение PKCS#7 | ✅ Выполнено | Правильное дополнение при шифровании, проверка при дешифровании |
| CRY-5 | Обработка бинарных файлов | ✅ Выполнено | Весь ввод-вывод использует бинарный режим (эквивалент `rb`/`wb`) |

**Технические детали:**
- **Шифр:** AES (Advanced Encryption Standard)
- **Размер ключа:** 128 бит (16 байт)
- **Размер блока:** 128 бит (16 байт)
- **Режим:** ECB (Electronic Codebook)
- **Дополнение:** PKCS#7
- **Библиотека:** OpenSSL (libcrypto)

**Ключевые компоненты:**
1. `aes_ecb_encrypt()` - Применяет дополнение PKCS#7 и шифрует поблочно
2. `aes_ecb_decrypt()` - Дешифрует поблочно и удаляет/проверяет дополнение
3. `hex_to_bytes()` - Преобразует шестнадцатеричную строку ключа в байты

### 4. Ввод-вывод файлов

| ID | Требование | Статус | Реализация |
|----|------------|--------|------------|
| IO-1 | Чтение всего входного файла | ✅ Выполнено | Функция `read_file()` в `src/file_io.c` |
| IO-2 | Запись выходного файла | ✅ Выполнено | Функция `write_file()` в `src/file_io.c` |
| IO-3 | Обработка ошибок | ✅ Выполнено | Корректные ошибки с информативными сообщениями в stderr |

**Обработка ошибок:**
- Файл не найден
- Отказано в доступе
- Ошибки чтения/записи
- Ошибки выделения памяти

Все ошибки выводятся в stderr, и программа завершается с ненулевым кодом состояния.

### 5. Тестирование и проверка

| ID | Требование | Статус | Реализация |
|----|------------|--------|------------|
| TEST-1 | Тест полного цикла | ✅ Выполнено | Шифрование, затем дешифрование дает идентичный файл |
| TEST-2 | Тестовый скрипт/пример | ✅ Выполнено | `tests/run_tests.sh` и `tests/test_manual.ps1` |
| TEST-3 | Проверка OpenSSL | ✅ Документировано | Инструкции приведены в README (отмечены различия в дополнении) |

**Покрытие тестами:**
1. ✅ Полный цикл для малого текстового файла
2. ✅ Полный цикл для большого файла (~1KB+)
3. ✅ Обработка бинарных файлов
4. ✅ Обработка пустых файлов
5. ✅ Файл, выровненный по блокам (16 байт)
6. ✅ Разные ключи дают разный вывод
7. ✅ Генерация имени выходного файла по умолчанию

**Тестовые скрипты:**
- `tests/run_tests.sh` - Всесторонний автоматизированный набор тестов (Bash)
- `tests/test_manual.ps1` - Ручные тесты для Windows (PowerShell)

---

## Технологический стек

| Компонент | Выбор | Статус |
|-----------|-------|--------|
| Язык | C | ✅ |
| Крипто-библиотека | OpenSSL (libcrypto) | ✅ |
| Система сборки | Makefile (Unix) / build.bat (Windows) | ✅ |
| Дополнение | PKCS#7 | ✅ |
| Формат ключа | Шестнадцатеричная строка | ✅ |
| Режим | ECB | ✅ |

---

## Краткое описание инструкций по сборке

### Linux/macOS
```bash
# Установите зависимости
sudo apt-get install build-essential libssl-dev  # Ubuntu/Debian
# или
brew install openssl  # macOS

# Соберите
make

# Установите (опционально)
sudo make install
```

### Windows (MSYS2)
```bash
# Установите зависимости
pacman -S mingw-w64-x86_64-gcc mingw-w64-x86_64-openssl make

# Соберите
make
```

### Windows (MinGW без Make)
```cmd
build.bat
```

---

## Поставляемые результаты

### ✅ Исходный код
- [x] `main.c` - Парсер CLI и основная программа
- [x] `src/ecb.c` - Реализация режима ECB
- [x] `src/file_io.c` - Операции ввода-вывода файлов
- [x] `include/ecb.h` - Заголовок ECB
- [x] `include/file_io.h` - Заголовок ввода-вывода файлов

### ✅ Система сборки
- [x] `Makefile` - Система сборки Unix/Linux/macOS
- [x] `build.bat` - Скрипт сборки для Windows

### ✅ Документация
- [x] `README.md` - Полная документация проекта
- [x] `QUICKSTART.md` - Краткое руководство
- [x] `WINDOWS_BUILD.md` - Инструкции для Windows
- [x] `EXAMPLES.md` - Примеры использования
- [x] `PROJECT_STATUS.md` - Этот отчет о статусе

### ✅ Тестирование
- [x] `tests/run_tests.sh` - Автоматизированный набор тестов
- [x] `tests/test_manual.ps1` - Тесты для PowerShell
- [x] Примеры проверки полного цикла

### ✅ Настройка репозитория
- [x] Git-репозиторий инициализирован
- [x] `.gitignore` настроен
- [x] Логическая структура директорий

---

## Известные ограничения и примечания

### Примечания, специфичные для платформы

#### Windows
- Требуется MSYS2 или MinGW с OpenSSL
- Тестовый скрипт (`run_tests.sh`) требует Bash (MSYS2)
- Предоставлен альтернативный скрипт для PowerShell (`test_manual.ps1`)

#### Сравнение с OpenSSL
- Прямое сравнение с `openssl enc -aes-128-ecb` сложно
- CryptoCore всегда применяет дополнение PKCS#7 (даже для данных, выровненных по блокам)
- Опция OpenSSL `-nopad` требует точного выравнивания по блокам
- Используйте тесты полного цикла для проверки вместо этого

---

## Критерии приемки

Все обязательные требования выполнены:

✅ **STR-1 to STR-4:** Структура проекта и система сборки завершены  
✅ **CLI-1 to CLI-5:** Интерфейс командной строки полностью реализован  
✅ **CRY-1 to CRY-5:** Основная криптография правильно реализована  
✅ **IO-1 to IO-3:** Ввод-вывод файлов с правильной обработкой ошибок  
✅ **TEST-1 to TEST-3:** Тестирование и проверка завершены  
